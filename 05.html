<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Render, Webpack, Vuex | Vue.js Lecture Note</title>
    <meta name="description" content="">
    <link rel="icon" href="/notesite/images/icon-144x144.png">
  <link rel="manifest" href="/notesite/manifest.json">
    
    <link rel="preload" href="/notesite/assets/css/0.styles.096013c7.css" as="style"><link rel="preload" href="/notesite/assets/js/app.7598ef95.js" as="script"><link rel="preload" href="/notesite/assets/js/2.2b413f48.js" as="script"><link rel="preload" href="/notesite/assets/js/9.ea0270c8.js" as="script"><link rel="preload" href="/notesite/assets/js/3.9a023001.js" as="script"><link rel="prefetch" href="/notesite/assets/js/10.af6dba14.js"><link rel="prefetch" href="/notesite/assets/js/11.cda827c0.js"><link rel="prefetch" href="/notesite/assets/js/12.abd301ab.js"><link rel="prefetch" href="/notesite/assets/js/13.7c59abbc.js"><link rel="prefetch" href="/notesite/assets/js/14.32cf25ee.js"><link rel="prefetch" href="/notesite/assets/js/4.a57bf471.js"><link rel="prefetch" href="/notesite/assets/js/5.48a0f058.js"><link rel="prefetch" href="/notesite/assets/js/6.33446d39.js"><link rel="prefetch" href="/notesite/assets/js/7.63882a72.js"><link rel="prefetch" href="/notesite/assets/js/8.8247d324.js">
    <link rel="stylesheet" href="/notesite/assets/css/0.styles.096013c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notesite/" class="home-link router-link-active"><!----> <span class="site-name">Vue.js Lecture Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/notesite/" class="sidebar-link">Introduction</a></li><li><a href="/notesite/02.html" class="sidebar-link">Event, Instance, Component, Axios</a></li><li><a href="/notesite/03.html" class="sidebar-link">Directives, npm, Vue CLI, Component</a></li><li><a href="/notesite/04.html" class="sidebar-link">Event Bus, Life Cycle, ES6</a></li><li><a href="/notesite/05.html" class="active sidebar-link">Render, Webpack, Vuex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notesite/05.html#render-with-life-cycle" class="sidebar-link">Render with life cycle</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#webpack" class="sidebar-link">Webpack</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#webpack-실습" class="sidebar-link">Webpack 실습</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#webpack-basic-concepts" class="sidebar-link">Webpack Basic Concepts</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#webpack-loader" class="sidebar-link">Webpack Loader</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#webpack-plugin" class="sidebar-link">Webpack Plugin</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#개발용-라이브러리와-배포용-라이브러리-구분" class="sidebar-link">개발용 라이브러리와 배포용 라이브러리 구분</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#webpack-dev-server" class="sidebar-link">Webpack Dev Server</a></li><li class="sidebar-sub-header"><a href="/notesite/05.html#vuex" class="sidebar-link">Vuex</a></li></ul></li><li><a href="/notesite/06.html" class="sidebar-link">Router, PWA</a></li><li><a href="/notesite/07.html" class="sidebar-link">Deployment with Vue CLI, PWA</a></li><li><a href="/notesite/08.html" class="sidebar-link">PWA Push Web App</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="render-webpack-vuex"><a href="#render-webpack-vuex" class="header-anchor">#</a> Render, Webpack, Vuex</h1> <h2 id="render-with-life-cycle"><a href="#render-with-life-cycle" class="header-anchor">#</a> Render with life cycle</h2> <p><img src="https://vuejs.org/images/lifecycle.png" alt="Vue lifecycle diagram"></p> <ol><li>created, 데이터 초기화 (반응성-reactivity 주입)</li> <li>beforeMount, 'template' 속성을 render 함수로 변환</li> <li>beforeUpdate, 컴포넌트에서 사용되는 속성의 값이 바뀔 때 실행</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">creteElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// return createElement('태그 이름', '태그 속성값', '하위 태그 정보')</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>str<span class="token punctuation">)</span> <span class="token comment">// reactivity를 반영</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>render 구현 방식</li></ul> <ol><li>tag에 있었을 때 (outerHTML)</li> <li>template 속성</li> <li>render 함수</li></ol> <p><a href="https://template-explorer.vuejs.org/" target="_blank" rel="noopener noreferrer">참고<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>life cycle에서는 create, beforeMount, Mounted (window.addEventListener / bus.$on) 이 세 개를 많이 쓰고,
이벤트 해제 할 때에 beforeDestory를 사용 (window.removeEventListener / bus.$off)</p> <h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> Webpack</h2> <p><a href="https://www.youtube.com/watch?v=WQue1AN93YU" target="_blank" rel="noopener noreferrer">웹팩 설명 유튜브 영상<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>여러 파일(모듈)을 묶어서 들고 오는 시간을 절약하는 것이 webpack의 목적</p> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2F5RiWw%2FbtqCbf8I2Ps%2FWW69xyf8sK9M9WbmrzwkUk%2Fimg.png" alt="webpage timeline"></p> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FUcxR5%2FbtqCcWtz1NN%2FPnlJcbVmheB4qEioNIDjX1%2Fimg.png" alt="각 요소가 포함하고 있는 contents"></p> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FmjV2g%2FbtqCckIwyRe%2FLhxngC5qkFeqEFGzLmxYrk%2Fimg.png" alt="Gulp에서는"></p> <p>Gulp는 코드를 다 써서 구현하는 반면에</p> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2F0PhV9%2FbtqCbUpKtlS%2Fm8FQvWQ9muMGS3IMe7QYF1%2Fimg.png" alt="Webpack은"></p> <p>Webpack은 자체적으로 지원해주는 기능이 많고, Gulp보다 생태계가 훨씬 크다는 장점이 있다.
따라서 새로운 프로젝트라면 Webpack을 쓰는 것이 좋다.</p> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FcyqxN2%2FbtqCcj3Rr7Q%2FdkTvobX7pAqZQk9gHAaSw0%2Fimg.png" alt="Webpack을 쓰지 않았을 때"> <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2Fbfgfc9%2FbtqB9W9QS9J%2Fm41LJfoIDPgvpYaIbchkq1%2Fimg.png" alt="Webpack을 썼을 때"></p> <p>Webpack을 쓰지 않았을 때와 썼을 때의 차이를 비교해볼 수 있다.</p> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FbjltVS%2FbtqCckobHOH%2FhBdoljjfOQ2ZwVKQPzbKA1%2Fimg.png" alt="번들링"></p> <p>웹페이지의 필요한 파일들을 static assets으로 바꾼다.</p> <p>번들링(bundling)이란 합치는 것. Build와 같은 의미로 보아도 좋다.</p> <h2 id="webpack-실습"><a href="#webpack-실습" class="header-anchor">#</a> Webpack 실습</h2> <p>lodash 라는 라이브러리를 웹팩을 이용해 번들링하는 실습이다.</p> <p><a href="https://joshua1988.github.io/webpack-guide/getting-started.html#%EC%9B%B9%ED%8C%A9-%EB%A7%9B%EB%B3%B4%EA%B8%B0-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC" target="_blank" rel="noopener noreferrer">순서 참고<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li></li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> init -y
</code></pre></div><ol start="2"><li></li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i webpack webpack-cli
</code></pre></div><ol start="3"><li></li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i lodash
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dist/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="4"><li></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span> <span class="token comment">// 상대경로 없이 이름만 쓰면 library</span>
</code></pre></div><p>lodash는 배열을 객체로 변환해주는 라이브러리이다.
_ === lodash</p> <ol start="5"><li></li></ol> <p>package.json에 아래와 같이 추가</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode=none&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>npm run build</li></ol> <h2 id="webpack-basic-concepts"><a href="#webpack-basic-concepts" class="header-anchor">#</a> Webpack Basic Concepts</h2> <ul><li>entry는 시작 field를 의미</li> <li>output은 기본으로 ./dist/main.js로 잡혀 있다.</li> <li>loader는 비js 파일을 js 파일로 변환시켜준다.
<ul><li>module은 돌릴 때에 필요한 속성, rule은 변환할 때 규칙을 정의하는 것</li></ul></li> <li>plugins은 기본으로 지원하지 않는 부가적인 기능을 설정할 수 있다.</li> <li>webpack의 추가 옵션들이 많아질 때 -&gt; webpack.config.js로 관리
<ul><li>mode는 none / production / deveplopment로, webpack이 업데이트 되기 전에는 plugins으로 설정했으나 최신버전은 해당사항 없음, build를 위해 아래와 같이 설정</li></ul></li></ul> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;npm run bundle -- --mode=production&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>webpack 주요 속성</li></ul> <p>entry, loader, output, plugin</p> <p><a href="https://joshua1988.github.io/webpack-guide/assets/img/diagram.519da03f.png" target="_blank" rel="noopener noreferrer">web 주요 속성<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="webpack-loader"><a href="#webpack-loader" class="header-anchor">#</a> Webpack Loader</h2> <div class="language-js extra-class"><pre class="language-js"><code>exports<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>module<span class="token punctuation">.</span>i<span class="token punctuation">,</span> <span class="token string">'p {\r\n\tcolor: blue;\r\n}\r\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>js파일 안에 text로 기존에 들어올 수 없는 것을 추가시켜주는 것이 loader이다.</p></li> <li><p>즉, 비js 파일(css, images, fonts...)을 js파일로 변환시켜준다.</p></li> <li><p>entry (index.js) -&gt; (중간에 loader가 개입) -&gt; output (dist/bundle.js)</p></li> <li><p>IE 등 ES6 문법이 필요하다면 babel이 필요한데 babel CLI를 설치하면 복잡해지니까 webpack이 해당 작업을 해줄 수 있음.</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.vue$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token string">'vue-loader'</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>module -&gt; rule에 위와 같이 추가하면 된다.</p> <ul><li>loader는 적용이 오른쪽에서 왼쪽으로 된다.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// css -&gt; style 순서로 적용이 된다.</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>Entrypoint main <span class="token operator">=</span> bundle.js

<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ./index.js <span class="token number">22</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> ./base.css <span class="token number">261</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre></div><p>위처럼 연관 관계 있는 것들을 하나씩 불러온다. dependency graph라고도 부른다.</p> <p>브라우저의 개발자도구에 network 패널을 보면 DOMContentLoaded와 Load라는 것을 확인할 수 있는데, webpack을 사용하기 전후를 비교해보면 확연하게 시간차이가 나는 것을 알 수 있다.</p> <ul><li>DOMContentLoaded : 기본적인 DOM 들만 들고오는 시간</li> <li>Load : css 등 다 불러오는 시간</li></ul> <h2 id="webpack-plugin"><a href="#webpack-plugin" class="header-anchor">#</a> Webpack Plugin</h2> <p>플러그인을 썼을 때 결과물에 추가적인 작업을 할 수 있다. (output뿐만 아니라, loader와 entry 단계에서도 적용 가능하다.)</p> <ul><li>html webpack plugin</li></ul> <p><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer">해당 plugin github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>chunk를 모두 html로 script 추가</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// index.html 템플릿을 기반으로 빌드 결과물을 추가해줌</span>
            template<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>MiniCssExtractPlugin</li></ul> <p>css 파일을 별도의 파일로 분리 (css를 추출하는 플러그인)</p> <h2 id="개발용-라이브러리와-배포용-라이브러리-구분"><a href="#개발용-라이브러리와-배포용-라이브러리-구분" class="header-anchor">#</a> 개발용 라이브러리와 배포용 라이브러리 구분</h2> <ul><li>개발용 (devDependencies)</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i webpack webpack-cli --save-dev
</code></pre></div><ul><li>배포용 (devDependencies)</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> I lodash –save
</code></pre></div><p>최종 애플리케이션에 포함되어야하는 라이브러리는 -D로 설치하면 안 된다. eslint, webpack등이 개발용 라이브러리이다.</p> <p>라이브러리 지울 때는 <code>npm uninstall</code> 명령어를 사용한다.</p> <h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> Webpack Dev Server</h2> <ul><li>매번 수정하고 <code>npm run build</code> 하는 것은 굉장히 비효율적인 반복 작업이다. 이 문제를 해결하기 위해, webpack dev server를 사용한다.</li> <li>webpack dev server : 파일 입출력을 하지 않고, 해당 dist/bundle.js를 memory 위에만 올려놓고 사용 (local에서 확인할 수 없다)</li> <li><code>npm run serve</code>로 해당 작업을 수행할 수 있다.</li> <li>추가적으로, webpack dev server를 이용하면 html, css, js 파일 뿐만 아니라, vue파일도 코드만 고쳤을 때 live server처럼 동일하게 화면을 갱신시켜줄 수 있다. webpack dev server에서 내부적으로 webpack 빌드를 하고 있다는 차이점이 존재하긴 한다.</li></ul> <h2 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h2> <ul><li>component와 달리 트리구조가 아니라 container(store)가 하나 존재하고, 거기에 값을 같이 접근하는 방식 -&gt; 정확하게는 단일 상태 트리를 이용 <a href="https://vuex.vuejs.org/kr/guide/state.html" target="_blank" rel="noopener noreferrer">Vuex State<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>React는 Redux, Mobx로 나누어진 반면, Vue는 Vuex만으로 상태를 관리. Mobx가 Vuex와 더 비슷하다고 한다.</li></ul> <p><img src="https://vuex.vuejs.org/flow.png" alt="Vuex State Diagram"></p> <p><img src="https://vuex.vuejs.org/vuex.png" alt="Vue Project에서의 Vuex"></p> <p>단방향으로만 흐르는 것을 알 수 있다.</p> <h3 id="state"><a href="#state" class="header-anchor">#</a> State</h3> <ul><li>vue에서의 상태 (state) : 여러 컴포넌트간 공유되는 data</li> <li>데이터가 많으면 한 곳에서 관리해야 한다. 상태 또한 component의 event처럼 규칙이 있다.</li></ul> <ol><li></li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i vuex
</code></pre></div><ol start="2"><li></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js에서</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	state<span class="token operator">:</span> <span class="token punctuation">{</span>
		str<span class="token operator">:</span> <span class="token string">'hi'</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// app.js에서</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> $store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>str <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre></div><h3 id="mutations"><a href="#mutations" class="header-anchor">#</a> Mutations</h3> <ul><li>state는 data와 비슷하고, mutations는 method와 비슷하다.</li> <li>차이점은 data는 Vue 개발자도구에서 최종 값만 확인할 수 있고, state는 data의 각 시점의 변화(logging)를 볼 수 있다.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addStr</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>str <span class="token operator">+=</span> <span class="token string">'!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>다른 컴포넌트에 아래 코드처럼 입력하면, 같은 data를 바라보기 때문에, 한 번의 mutation으로 두 개의 component가 변경된다.</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>HelloWorld의 뷰엑스 코드<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$store.commit('addStr')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Vuex버튼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ $store.state.str }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>main.js : 전반적인 library, 프로젝트에 어떤 기능이 있는지 포함이 되어 있어야 한다. store나 router가 많아지면 한 눈에 보기 힘들기 때문에
src 폴더 밑에 store 폴더를 만들고 index.js에 store와 router를 포함시켜야 한다.</li></ul> <h3 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users/1'</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">json</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// json 결과를 this.user에 담아 둔다.</span>
</code></pre></div><p>위는 브라우저에서 사용되는 HTML request 방식이다.</p> <ul><li>데이터 호출은 vuex에서 mutations이 아닌 actions으로 한다!</li> <li>actions에 작성하는 함수는 전부 대문자로 작성 (ex&gt; FETCH_USER)</li> <li>mutations와 달리, actions에서 state로 갈 수 있는 길이 없다. mutations을 거쳐야만 가능하다.</li> <li>mutations은 devtool로 확인할 수 있기 때문에 debugging도 용이하다.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 두 번째 인자는 payload로도 많이 씀</span>
        state<span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>context 객체 안에 commit이 포함되어 있다. <a href="https://vuex.vuejs.org/kr/api/#actions" target="_blank" rel="noopener noreferrer">참고<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">FETCH_USER</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users/1'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">json</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setUser'</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// context.commit('mutation name', json)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>actions을 호출할 때는 dispatch를 이용한다. mutations이 commit을 사용하는 것과 구별할 것.</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$store.dispatch('FETCH_USER')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>get user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ $store.state.user }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Vue core library는 화면단의 데이터에 관한 기능을 중점 지원하지만, 프레임워크의 기능인 router, state, testing을 쉽게 할 수 있는 형태로 제공. Vue를 단지 library뿐만이 아닌, progressive framework라고 부르는 이유이다.</li></ul> <p><img src="http://wiki.sys4u.co.kr/download/attachments/8552708/Screenshot_266.png?version=1&amp;modificationDate=1528379053000&amp;api=v2" alt="progressive framework로서의 Vue"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notesite/04.html" class="prev">Event Bus, Life Cycle, ES6</a></span> <span class="next"><a href="/notesite/06.html">Router, PWA</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/notesite/assets/js/app.7598ef95.js" defer></script><script src="/notesite/assets/js/2.2b413f48.js" defer></script><script src="/notesite/assets/js/9.ea0270c8.js" defer></script><script src="/notesite/assets/js/3.9a023001.js" defer></script>
  </body>
</html>
